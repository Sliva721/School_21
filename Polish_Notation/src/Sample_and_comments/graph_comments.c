// Данный код на языке Си реализует простую программу, которая принимает вводную строку, 
// содержащую математическое выражение в польской нотации, и строит график функции, представленной этим выражением. 
// Программа также использует пользовательские библиотеки, что подразумевает наличие дополнительных файлов, 
// таких как `calculation.h`, `draw.h` и `mystack.h`, которые содержат необходимые функции и структуры.

#include <math.h>       // Библиотека для математических функций
#include <stdio.h>      // Библиотека для ввода-вывода
#include <stdlib.h>     // Библиотека для стандартных функций (например, malloc, calloc)

// Подключение пользовательских заголовочных файлов для расчетов, рисования и работы со стеком
#include "calculation.h"
#include "draw.h"
#include "mystack.h"

int main() {
    // Выделение памяти для двумерного массива (матрицы), который будет представлять график
    char **graph = calloc_matrix(HEIGHT, WIDTH + 1);
    
    // Объявление структуры для операций (предположительно, для хранения стека операций)
    struct st *operations = NULL;
    
    // Буферы для введенной и выведенной строки
    char input_string[80], output_string[80];
    
    fflush(stdin); // Очистка буфера ввода (не рекомендуется на некоторых платформах)
    
    // Считывание строки из стандартного ввода (например, выражения в польской нотации)
    fgets(input_string, 80, stdin);
    
    // Парсинг строки в польской нотации и вывод результата в output_string
    parsing_in_polish_notation(operations, input_string, output_string);
    
    // Вывод результата на экран
    printf("\n%s\n", output_string);
    
    fflush(stdin); // Очистка буфера ввода (не рекомендуется на некоторых платформах)
    
    HEAD head; // Объявление переменной для الرأس стека
    init(&head); // Инициализация стека
    
    // Инициализация графического массива
    init_graph(graph, HEIGHT, WIDTH);
    
    // Добавление функции для графика в массив graph с использованием output_string и головы стека head
    add_func_for_graph(graph, HEIGHT, WIDTH, output_string, &head);
    
    // Рисование графика
    draw_graph(graph, HEIGHT);
    
    // Освобождение памяти, выделенной для графической матрицы
    free_matrix(graph, HEIGHT);
    
    return 0; // Завершение программы
}